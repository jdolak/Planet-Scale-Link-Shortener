<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Text Upload</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
    <header>
        <h1>Upload Your Text</h1>
        <button class="home-button" onclick="location.href='homepage.html'">Go to Homepage</button>
    </header>
    <main>
        <script>
            function sendPaste() {
                var formData = JSON.stringify($("#paste").serializeArray()).slice(1,-1);
                $.ajax({
                    type: "POST",
                    url: "http://localhost/paste",
                    data: formData,
                    success: function(response){
                        var paragraph = document.getElementById('link');
                        paragraph.textContent = response;
                    },
                    dataType: "json",
                    contentType : "application/json"
                });
                console.log("bruh")
            }
        </script>
        <section class="upload-section">
            <!--<form action="/paste" method="post" enctype="multipart/form-data" id="paste">-->
            <form id="paste">
                <label for="file_input">Choose a text file:</label>
                <input type="file" id="file_input" name="file_input" accept=".txt"><br>
                <label for="text_area">Or paste your text here:</label><br>
                <textarea id="text_area" name="paste" rows="10" cols="50"></textarea><br>
                <input type="button" value="Upload" onclick="sendPaste()">
            </form>
            <p id="link">

            </p>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 pspbalsaas</p>
    </footer>
</body>
</html>